<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>UUangian&#39;s</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="UUangian's">
<meta property="og:url" content="http://uuangian.github.io/page/2/index.html">
<meta property="og:site_name" content="UUangian's">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="UUangian's">
<meta name="twitter:description">
<meta name="twitter:creator" content="@youior">
  
    <link rel="alternative" href="/atom.xml" title="UUangian&#39;s" type="application/atom+xml">
  
  
    <link rel="icon" href="img/favicon.ico">
  
    
  <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">UUangian&#39;s</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/book">Book</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-github-link" class="nav-icon" href="https://github.com/uuangian" target="_blank" title="GitHub"></a>        
        <a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/youior" target="_blank" title="Twitter"></a>
        <a id="nav-instagram-link" class="nav-icon" href="http://instagram.com/youior" target="_blank" title="Instagram"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://uuangian.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-wrapper-jni-guide-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/20/wrapper-jni-guide-2/" class="article-date">
  <time datetime="2015-05-20T05:59:59.000Z" itemprop="datePublished">2015-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/20/wrapper-jni-guide-2/">Wrapper JNI Program Guide 2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Originally From <a href="http://thebreakfastpost.com/2012/01/26/wrapping-a-c-library-with-jni-part-2/" target="_blank" rel="external">Wrapping a C++ library with JNI Part 2</a></p>
<h2><strong>Wrapping a C++ library with JNI <br> - part 2</strong></h2>
<h3>In this series…</h3>
<ul>
<li><a href="/2015/05/20/wrapper-jni-guide-0">Introduction</a>, outlining the general steps from starting with a C++ library to being able to build and run simple tests on some JNI wrappers;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-1">Part 1</a>, in which I design some simple Java classes and generate the stub wrapper code;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-2">Part 2</a>, in which I add just enough of the implementation to be able to do a test build;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-3">Part 3</a>, discussing object lifecycles in C++ and Java;</li>
<li><a href="/2015/05/21/wrapper-jni-guide-4">Part 4</a>, the final episode covering a few remaining points of interest.</li>
</ul>
<p>By the end of <a href="/2015/05/20/wrapper-jni-guide-1">my previous post</a>, I had cooked up some simple Java classes corresponding to those parts of the C++ library API that I wanted to wrap up first.</p>
<p>(That means as little of the API as is necessary to get a simple build and test going: I can add to it after that.)</p>
<p>Now I need to fill in the JNI function implementations, code up a little test program, build it, and see what ensues.</p>
<h3><strong>4. Write JNI function bodies</strong></h3>
<p>This is the point at which we need to start referring quite seriously to the JNI specification and Programmer’s Guide.</p>
<p>Our task is to write function bodies for the functions whose declarations have been generated by javah. The first thing we’ll need is a way to get and set the native handles we are storing in each Java class, so that we can keep track of the native object that each Java object corresponds to.</p>
<p>This can go in a common header, <code>handle.h</code>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ifndef _HANDLE_H_INCLUDED_&#10;#define _HANDLE_H_INCLUDED_&#10;&#10;jfieldID getHandleField(JNIEnv *env, jobject obj)&#10;&#123;&#10;    jclass c = env-&#62;GetObjectClass(obj);&#10;    // J is the type signature for long:&#10;    return env-&#62;GetFieldID(c, &#34;nativeHandle&#34;, &#34;J&#34;);&#10;&#125;&#10;&#10;template &#60;typename T&#62;&#10;T *getHandle(JNIEnv *env, jobject obj)&#10;&#123;&#10;    jlong handle = env-&#62;GetLongField(obj, getHandleField(env, obj));&#10;    return reinterpret_cast&#60;T *&#62;(handle);&#10;&#125;&#10;&#10;template &#60;typename T&#62;&#10;void setHandle(JNIEnv *env, jobject obj, T *t)&#10;&#123;&#10;    jlong handle = reinterpret_cast&#60;jlong&#62;(t);&#10;    env-&#62;SetLongField(obj, getHandleField(env, obj), handle);&#10;&#125;&#10;&#10;#endif</span><br></pre></td></tr></table></figure>
<p>For <code>PluginLoader.cpp</code>, we start with the appropriate headers and namespaces:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &#34;org_vamp_plugins_PluginLoader.h&#34;&#10;#include &#60;vamp-hostsdk/PluginLoader.h&#62;&#10;#include &#34;handle.h&#34;&#10;&#10;using Vamp::Plugin;&#10;using Vamp::HostExt::PluginLoader;</span><br></pre></td></tr></table></figure>
<p>Now we need two function implementations. We have the declarations for these already: they were generated by <code>javah</code> in the previous post.</p>
<p>One, the <code>initialise</code> function called from the Java class constructor, simply creates a native object and stows it in the Java object.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void&#10;Java_org_vamp_1plugins_PluginLoader_initialise(JNIEnv *env, jobject obj)&#10;&#123;&#10;    PluginLoader *inst = PluginLoader::getInstance();&#10;    setHandle(env, obj, inst);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>The other does the real work. Here we grab the previously stowed native object from the handle in the Java object, convert the plugin key argument from its opaque <code>jstring</code> type to a C string, call out to the native <code>loadPlugin</code>, and return the result.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jlong &#10;Java_org_vamp_1plugins_PluginLoader_loadPluginNative(JNIEnv *env, jobject obj,&#10;                             jstring key, jfloat rate)&#10;&#123;&#10;    PluginLoader *inst = getHandle&#60;PluginLoader&#62;(env, obj);&#10;    const char *kstr = env-&#62;GetStringUTFChars(key, 0);&#10;    Plugin *p = inst-&#62;loadPlugin(kstr, rate);&#10;    env-&#62;ReleaseStringUTFChars(key, kstr);&#10;    return (jlong)p;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>In contrast, <code>Plugin.cpp</code> is largely a cut-and-paste job:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &#34;org_vamp_plugins_Plugin.h&#34;&#10;#include &#60;vamp-hostsdk/Plugin.h&#62;&#10;#include &#34;handle.h&#34;&#10;&#10;using Vamp::Plugin;&#10;using std::string;&#10;&#10;jstring&#10;Java_org_vamp_1plugins_Plugin_getIdentifier(JNIEnv *env, jobject obj)&#10;&#123;&#10;    Plugin *p = getHandle&#60;Plugin&#62;(env, obj);&#10;    return env-&#62;NewStringUTF(p-&#62;getIdentifier().c_str());&#10;&#125;&#10;&#10;jstring&#10;Java_org_vamp_1plugins_Plugin_getName(JNIEnv *env, jobject obj)&#10;&#123;&#10;    Plugin *p = getHandle&#60;Plugin&#62;(env, obj);&#10;    return env-&#62;NewStringUTF(p-&#62;getName().c_str());&#10;&#125;&#10;&#10;jstring&#10;Java_org_vamp_1plugins_Plugin_getDescription(JNIEnv *env, jobject obj)&#10;&#123;&#10;    Plugin *p = getHandle&#60;Plugin&#62;(env, obj);&#10;    return env-&#62;NewStringUTF(p-&#62;getDescription().c_str());&#10;&#125;&#10;&#10;jint&#10;Java_org_vamp_1plugins_Plugin_getPluginVersion(JNIEnv *env, jobject obj)&#10;&#123;&#10;    Plugin *p = getHandle&#60;Plugin&#62;(env, obj);&#10;    return p-&#62;getPluginVersion();&#10;&#125;</span><br></pre></td></tr></table></figure>
<h3><strong>5. Make a test program</strong>*</h3>
<p>This should be a Java program that refers only to the Java classes I’ve put together. It just needs to load a plugin using the <code>PluginLoader</code> class, and call some test methods on the resulting plugin.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package org.vamp_plugins;&#10;&#10;public class test&#10;&#123;&#10;    public static void main(String[] args) &#123;&#10;&#10;        // This is the name of a Vamp plugin we know we have installed&#10;        String key = &#34;vamp-example-plugins:percussiononsets&#34;;&#10;&#10;        PluginLoader loader = PluginLoader.getInstance();&#10;&#10;        try &#123;&#10;            Plugin p = loader.loadPlugin(key, 44100);&#10;            System.out.println(&#34;identifier: &#34; + p.getIdentifier());&#10;            System.out.println(&#34;name: &#34; + p.getName());&#10;            System.out.println(&#34;description: &#34; + p.getDescription());&#10;            System.out.println(&#34;version: &#34; + p.getPluginVersion());&#10;        &#125; catch (PluginLoader.LoadFailedException e) &#123;&#10;            System.out.println(&#34;Plugin load failed&#34;);&#10;        &#125;&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>That should be enough.</p>
<h3><strong>6. Build and test</strong></h3>
<p>So, we need to compile and link our C++ wrapper implementations into a dynamic library (DLL, or shared object); and we need to build our Java test program.</p>
<p>How you would do this depends on the platform and development environment you’re using. For the purposes of this post, I’m using Linux and command-line tools.</p>
<p>So, for the C++ parts I’ll create a small <code>Makefile</code>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LIBRARY := libvamp-jni.so&#10;OBJFILES := src/PluginLoader.o src/Plugin.o&#10;INCLUDES := -I$(JAVA_HOME)/include -I$(JAVA_HOME)/include/linux&#10;CXXFLAGS := $(INCLUDES)&#10;&#10;$(LIBRARY): $(OBJFILES)&#10;    $(CXX) -shared -o $@ $^ -lvamp-hostsdk</span><br></pre></td></tr></table></figure>
<p>Thus:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ make&#10;g++ -I/usr/lib/jvm/java-6-openjdk/include -I/usr/lib/jvm/java-6-openjdk/include/linux   -c -o src/PluginLoader.o src/PluginLoader.cpp&#10;g++ -I/usr/lib/jvm/java-6-openjdk/include -I/usr/lib/jvm/java-6-openjdk/include/linux   -c -o src/Plugin.o src/Plugin.cpp&#10;g++ -shared -o libvamp-jni.so src/PluginLoader.o src/Plugin.o -lvamp-hostsdk&#10;$</span><br></pre></td></tr></table></figure>
<p>Now build the Java classes and test program, and run it:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ javac org/vamp_plugins/*.java&#10;$ java -classpath . org.vamp_plugins.test&#10;Exception in thread &#34;main&#34; java.lang.UnsatisfiedLinkError: org.vamp_plugins.PluginLoader.initialise()V&#10;    at org.vamp_plugins.PluginLoader.initialise(Native Method)&#10;    at org.vamp_plugins.PluginLoader.&#60;init&#62;(PluginLoader.java:23)&#10;    at org.vamp_plugins.PluginLoader.getInstance(PluginLoader.java:10)&#10;    at org.vamp_plugins.test.main(test.java:11)&#10;$</span><br></pre></td></tr></table></figure>
<p>Uh-oh. I forgot to load the JNI wrapper DLL. To make this happen, I need to add a static section to the end of the <code>PluginLoader</code> class:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">static &#123;&#10;        System.loadLibrary(&#34;vamp-jni&#34;);&#10;    &#125;</span><br></pre></td></tr></table></figure>
<p>The JVM class loader is quite sensitive to the exact name and location of the library file.</p>
<p>If I supply the name <code>vamp-jni</code> to loadLibrary as above, then on my Linux machine the JVM will expect the library to be called <a href="http://libvamp-jni.so" target="_blank" rel="external">libvamp-jni.so</a> (and not, say, <a href="http://vamp-jni.so" target="_blank" rel="external">vamp-jni.so</a>).</p>
<p>Other rules apply on other platforms.</p>
<p>Rebuilding and trying again:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ javac org/vamp_plugins/*.java&#10;$ java -classpath . org.vamp_plugins.test&#10;identifier: percussiononsets&#10;name: Simple Percussion Onset Detector&#10;description: Detect percussive note onsets by identifying broadband energy rises&#10;version: 2&#10;$</span><br></pre></td></tr></table></figure>
<p>Hurrah!</p>
<h3><strong>Next</strong></h3>
<p>In my <a href="/2015/05/20/wrapper-jni-guide-3">next post</a> on this subject, I talk about managing the disposal of our underlying C++ objects to avoid memory leaks.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://uuangian.github.io/2015/05/20/wrapper-jni-guide-2/" data-id="cidz7acvz000szoroqa569s9z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JNI/">JNI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wrapper-jni-guide-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/20/wrapper-jni-guide-1/" class="article-date">
  <time datetime="2015-05-20T05:59:53.000Z" itemprop="datePublished">2015-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/20/wrapper-jni-guide-1/">Wrapper JNI Program Guide 1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Originally From <a href="http://thebreakfastpost.com/2012/01/23/wrapping-a-c-library-with-jni-part-1/" target="_blank" rel="external">Wrapping a C++ library with JNI Part 1 </a></p>
<h2><strong>Wrapping a C++ library with JNI <br> - part 1</strong></h2>
<h3>In this series…</h3>
<ul>
<li><a href="/2015/05/20/wrapper-jni-guide-0">Introduction</a>, outlining the general steps from starting with a C++ library to being able to build and run simple tests on some JNI wrappers;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-1">Part 1</a>, in which I design some simple Java classes and generate the stub wrapper code;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-2">Part 2</a>, in which I add just enough of the implementation to be able to do a test build;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-3">Part 3</a>, discussing object lifecycles in C++ and Java;</li>
<li><a href="/2015/05/21/wrapper-jni-guide-4">Part 4</a>, the final episode covering a few remaining points of interest.</li>
</ul>
<p>In my introductory post I outlined the steps I’d need to take in order to get a JNI wrapper working for a simple subset of a C++ library. Time to get started.</p>
<h3><strong>1. Identify the C++ classes and methods</strong></h3>
<p>The C++ library I’m wrapping is documented <a href="https://code.soundsoftware.ac.uk/embedded/vamp-plugin-sdk/namespaceVamp.html" target="_blank" rel="external">here</a>.</p>
<p>I’ll initially need to wrap parts of two classes: PluginLoader, in the Vamp::HostExt namespace, and Plugin, in the Vamp namespace.</p>
<p>PluginLoader is a singleton class which loads and returns an instance of a Vamp plugin on request, given the name (or “key”) of the plugin. It’s essentially an object factory.</p>
<p>Then Plugin has both methods that return information about the specific plugin that has been loaded, and methods that are called with blocks of audio data in order to do the actual analysis.</p>
<p>In my first draft, I want to make a singleton Java class to correspond to PluginLoader and implement in it the one method that actually loads the plugin; and I want to make a Plugin class with a couple of the methods that return simple metadata about the plugin.</p>
<p>The methods that do real work involve some complicated return types, so I’ll leave those until later.</p>
<p>So the basic library API I’m starting with looks like this, in the existing C++ API:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class PluginLoader&#10;&#123;&#10;public:&#10;    static PluginLoader *getInstance();&#10;    Plugin *loadPlugin(PluginKey key,&#10;                       float inputSampleRate,&#10;                       int adapterFlags = 0);&#10;    // ... other methods for later&#10;&#125;;&#10;&#10;class PluginBase&#10;&#123;&#10;public:&#10;    virtual std::string getIdentifier() const = 0;&#10;    virtual std::string getName() const = 0;&#10;    virtual std::string getDescription() const = 0;&#10;    virtual int getPluginVersion() const = 0;&#10;    // ... other methods for later&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>That’s plenty to be going on with.</p>
<p>Note that the <code>PluginBase</code> with its pure virtual methods is somewhat like a C++ equivalent of a Java interface; the plugins themselves have a subclass type, namely Plugin.</p>
<h3><strong>2. Design the Java classes</strong></h3>
<p>There may be several ways to render a native library into Java classes, even where the native library API is already written as a set of C++ classes.</p>
<p>In this case, <code>PluginBase</code> is similar to a Java interface, so I could turn it into one, or I could just put everything straight into the <code>Plugin</code> class in the Java version.</p>
<p>I’ll start with the latter, because it’s simpler. At this stage my only goal is to get something built that I can run and test. I can refactor later.</p>
<p>So, my first draft of <code>Plugin</code> is:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package org.vamp_plugins;&#10;&#10;public class Plugin&#10;&#123;&#10;    public native String getIdentifier();&#10;    public native String getName();&#10;    public native String getDescription();&#10;    public native int getPluginVersion();&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>The methods are all declared native and left unimplemented in the Java; they’ll be implemented in our C++ JNI wrapper later on.</p>
<p>Meanwhile I want my <code>PluginLoader</code> to look a bit like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package org.vamp_plugins;&#10;&#10;public class PluginLoader&#10;&#123;&#10;    public class LoadFailedException&#10;        extends Exception &#123; &#125;;&#10;    public static synchronized PluginLoader getInstance() &#123;&#10;        // some magic here&#10;    &#125;&#10;    public Plugin loadPlugin(String key, float inputSampleRate)&#10;        throws LoadFailedException &#123;&#10;        // and here&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>The C++ <code>PluginLoader</code> returns a null pointer if it can’t load a plugin. I want to throw an exception instead, and for this reason I haven’t marked loadPlugin as native—instead it will call a native method that returns a null or non-null value, throwing the exception if the returned value is null.</p>
<p>I’ve made other simplifications too. I happen to know that the PluginKey type referred to in the C++ API is just a typedef for std::string, so I’ve translated it to a Java string type for the moment. I’ve omitted the options argument for now as well.</p>
<h3>Native object handles</h3>
<p>I have two Java classes, each instance of which should “manage” a C++ object of a corresponding class from the native library. Every time a method is called on a given Java instance, it should call through to the same instance of the underlying C++ class.</p>
<p>To make this happen, we need to make the Java object remember which C++ object it is managing.</p>
<p>For this purpose we’ll have both classes simply contain a “handle” field, which will hold a value that (on the native side of the fence) will be interpreted as a pointer to the C++ object on the heap, and (on the Java side) will be an opaque integer value.</p>
<p>We just need to make sure the handle is stored in an integer type big enough for a pointer; the Java long type will do.</p>
<p>Also, we need a way to construct Plugin objects. The PluginLoader will make plugins by calling its native-code implementation, getting back a C++ plugin pointer, and using that to construct our Java Plugin, so our plugin class needs a constructor that works from our opaque handle type.</p>
<p>Adding these details and filling in our singleton implementation gives us:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class PluginLoader&#10;&#123;&#10;    public class LoadFailedException&#10;        extends Exception &#123; &#125;;&#10;&#10;    public static synchronized PluginLoader getInstance() &#123;&#10;        if (inst == null) &#123;&#10;            inst = new PluginLoader();&#10;            inst.initialise();&#10;        &#125;&#10;        return inst;&#10;    &#125;&#10;&#10;    public Plugin loadPlugin(String key, float inputSampleRate)&#10;        throws LoadFailedException &#123;&#10;        long handle = loadPluginNative(key, inputSampleRate);&#10;        if (handle != 0) return new Plugin(handle);&#10;        else throw new LoadFailedException();&#10;    &#125;&#10;&#10;    private PluginLoader() &#123; initialise(); &#125;&#10;    private native long loadPluginNative(String key, float inputSampleRate);&#10;    private native void initialise();&#10;    private static PluginLoader inst;&#10;    private long nativeHandle;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>and</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class Plugin&#10;&#123;&#10;    private long nativeHandle;&#10;    protected Plugin(long handle) &#123;&#10;        nativeHandle = handle;&#10;    &#125;&#10;&#10;    public native String getIdentifier();&#10;    public native String getName();&#10;    public native String getDescription();&#10;    public native int getPluginVersion();&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>The initialise method in <code>PluginLoader</code> is there to construct a native object and set up its <code>nativeHandle</code> field. <code>Plugin</code> doesn’t need a similar method, because its handle is given to it in the constructor.</p>
<p><em>Hang on! How does the native object get deleted?</em>  — I give over a later post entirely to discussion of this question, so skip there if you’re interested now.</p>
<h3><strong>3. Generate JNI function declarations</strong></h3>
<p>For each of the native methods in our Java classes, we need an implementation in the JNI wrapper code. This will be a function in C or C++, with a name encoding the Java class and method name and an appropriate signature to receive the JNI mappings for the Java argument types, and with C linkage.</p>
<p>It’s perfectly possible to write these from scratch, but the JDK includes a tool called javah that can help by producing the function prototypes. It requires compiled class files rather than Java files as input:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ javac org/vamp_plugins/*.java&#10;$ javah -jni org.vamp_plugins.Plugin org.vamp_plugins.PluginLoader&#10;$ ls -1&#10;org&#10;org_vamp_plugins_Plugin.h&#10;org_vamp_plugins_PluginLoader.h&#10;sample.h&#10;$</span><br></pre></td></tr></table></figure>
<p>As you see, javah generates a header file for each Java class; they contain declarations like</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">JNIEXPORT jstring JNICALL&#10;Java_org_vamp_1plugins_Plugin_getIdentifier&#10; (JNIEnv *, jobject);</span><br></pre></td></tr></table></figure>
<p>The <code>JNIEXPORT</code> and <code>JNICALL</code> macros simply ensure traditional C linkage regardless of the build platform.</p>
<p>The method’s return type, <code>String</code> in the Java code, has been converted to the opaque JNI type <code>jstring</code>.</p>
<p>The function name is an encoding of the package, class, and method name. These must appear exactly as generated by javah, as the JVM relies on them to find the implementation code.</p>
<p>And the two arguments, which are common to all JNI implementation functions, provide the environment object which rolls up the JNI function namespace, and an opaque jobject referring to the this object on which the method was called.</p>
<p>If we leave these headers untouched and simply include them in our implementation files, then we’ll be able to regenerate them when we extend our Java API without losing any of our work.</p>
<blockquote>
<p><em>Administrative note: If you haven’t already, this is a good moment to put the code directory under version control, so as to be able to mess around without fear of losing any working code.</em></p>
<p><em>I like <a href="http://mercurial.selenic.com/" target="_blank" rel="external">Mercurial</a>, so I would either <code>hg init; hg add org/vamp_plugins/*.java</code> and <code>hg commit</code>, or else run up <a href="http://easyhg.org/" target="_blank" rel="external">EasyMercurial</a> and follow roughly <a href="http://vimeo.com/29779641" target="_blank" rel="external">the explanation in this video.</a></em></p>
</blockquote>
<h2><strong>Next</strong></h2>
<p>In my <a href="/2015/05/20/wrapper-jni-guide-2">next article</a> I talk about writing the JNI wrapper implementations for these functions, and testing them from Java.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://uuangian.github.io/2015/05/20/wrapper-jni-guide-1/" data-id="cidz7acwa000vzoro1dvfy6xx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JNI/">JNI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wrapper-jni-guide-0" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/20/wrapper-jni-guide-0/" class="article-date">
  <time datetime="2015-05-20T05:59:46.000Z" itemprop="datePublished">2015-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/20/wrapper-jni-guide-0/">Wrapper JNI Program Guide</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Originally From <a href="http://thebreakfastpost.com/2012/01/21/wrapping-a-c-library-with-jni-introduction/" target="_blank" rel="external">Wrapping a C++ library with JNI </a></p>
<h2><strong>Wrapping a C++ library with JNI <br> - introduction</strong></h2>
<h3>In this series…</h3>
<ul>
<li><a href="/2015/05/20/wrapper-jni-guide-0">Introduction</a>, outlining the general steps from starting with a C++ library to being able to build and run simple tests on some JNI wrappers;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-1">Part 1</a>, in which I design some simple Java classes and generate the stub wrapper code;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-2">Part 2</a>, in which I add just enough of the implementation to be able to do a test build;</li>
<li><a href="/2015/05/20/wrapper-jni-guide-3">Part 3</a>, discussing object lifecycles in C++ and Java;</li>
<li><a href="/2015/05/21/wrapper-jni-guide-4">Part 4</a>, the final episode covering a few remaining points of interest.</li>
</ul>
<p>Java Native Interface, or JNI, is a standard mechanism for calling “native” code—that is, code compiled from a language such as C or C++—from within the Java Virtual Machine.</p>
<p>It allows a programmer working in Java, or another language running on the JVM such as Scala, Clojure, Groovy, or Yeti, to use existing C and C++ library code, for reasons of performance or for compatibility with old or third-party code.</p>
<p>JNI is a bit of an old-school technology, though it’s gained more attention through its use in the Android platform as the glue between managed Dalvik applications and native NDK libraries.</p>
<p>(Later note: Java developers with no C or C++ experience may be happier using <a href="https://github.com/twall/jna#java-native-access-jna" target="_blank" rel="external">JNA, or Java Native Access</a>. This more recent technology uses a single C library for each platform, which is supplied with JNA and which can load any native library. Using JNA still involves writing some boilerplate code, but that code is all in Java. I don’t cover JNA at all in this tutorial.)</p>
<h3><div style="color: #228897;"><strong>What I’m doing</strong></div></h3>
<p>I’m about to make a wrapper for an existing C++ library using JNI, so I’m going to explain the process as I go along.</p>
<p>The library I’m planning to wrap up is the host SDK for <a href="http://vamp-plugins.org/" target="_blank" rel="external">Vamp audio analysis plugins</a> <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>. I hope the result will enable Java applications to use these plugins to analyse audio signals.</p>
<p>From a technical perspective, though, it doesn’t really matter what the library is. What matters is that I have some header files that describe the library’s API, and either a DLL or a static library that provides the implementation. In this case I also happen to have the library’s source code, but that isn’t essential to calling it through JNI.</p>
<p>Most JNI tutorials use C as the native implementation language, but here I’m assuming the native code is entirely in C++. (If you’d like to read a simpler introduction that uses C, try the JNI Programmer’s Guide <a href="http://java.sun.com/docs/books/jni/html/start.html" target="_blank" rel="external">Getting Started</a> chapter.)</p>
<p>This explanation uses desktop Java: although the principles are much the same, I won’t be referring the Android toolchain here.</p>
<h3><div style="color: #228897;"><strong>The steps I need to take</strong></div></h3>
<p>To get my C++ library working from Java code, I will need to:</p>
<ol>
<li>Identify the C++ classes and methods that I want to make available from those in the library’s API, starting with the smallest subset I can make a meaningful test case from;</li>
<li>Design an appropriate set of equivalent Java classes, in which the methods that will be implemented by the library are declared using the native keyword and left unimplemented in the Java code;</li>
<li>Generate stub function declarations for the JNI wrapper. The wrapper is a chunk of C code that contains a specially named function to implement each of the classes’ native methods, and the generator is what gives us the names of these functions;</li>
<li>Write the body of the JNI wrapper, implementing each function by converting its Java type arguments into appropriate C or C++ types, calling the native library, and converting the results back again;</li>
<li>Make a little test program in Java;</li>
<li>Build everything and test it.
Then repeat until enough of the library has been wrapped.</li>
</ol>
<h3><div style="color: #228897;"><strong>Next</strong></div></h3>
<ul>
<li>In the first tutorial post I’ll cover steps 1 to 3, getting to the point where we’re about to have to write some C++ for the JNI wrapper code.
The subsequent post will cover steps 4 to 6, to the point of having a working interface and test program for a simple subset of the C++ library.</li>
</ul>
<p>And I’ll finish with a couple of posts that discuss management of object disposal and a few other details of handling a more complex method.</p>
<hr>
<p><strong><em>Process Map</em></strong>
<img src="/img/traditional-way.png" alt=""></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>To find out more about Vamp plugins, see <a href="http://vamp-plugins.org/guide.pdf" target="_blank" rel="external">the programmers’ guide</a> and <a href="http://vamp-plugins.org/wiki/" target="_blank" rel="external">these tutorials</a>. But although they explain the concepts, note that these describe the process of writing plugins, while we are providing support for hosts— so the APIs are not quite the same. <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://uuangian.github.io/2015/05/20/wrapper-jni-guide-0/" data-id="cidz7acwj000yzororzd4g6em" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JNI/">JNI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-deploy-on-github" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/20/deploy-on-github/" class="article-date">
  <time datetime="2015-04-20T00:57:24.000Z" itemprop="datePublished">2015-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/20/deploy-on-github/">GitHub上部署Hexo网站</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Hexo建站参见<a href="/2015/04/17/build-site-record-hexo/">build-site-record-hexo</a></p>
<h2>1. 建立远程GitHub连接</h2>
<h3>本地Git客户端</h3>
<p>在<a href="/2015/04/17/build-site-record-hexo/">Hexo建站</a>中提到Windows下安装Git客户端msysgit，安装完成后即可使用Git Bash进命令操作</p>
<h3>生成新的SSH Key</h3>
<p>在GitBash中</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &#34;&#37038;&#20214;&#22320;&#22336;@youremail.com&#34;&#10;Generating public/private rsa key pair.&#10;Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):</span><br></pre></td></tr></table></figure>
<p>在GitHub中添加生成的SSH Key
参见<a href="https://help.github.com/articles/generating-ssh-keys/#step-4-add-your-ssh-key-to-your-account" target="_blank" rel="external">add-your-ssh-key-to-your-account</a></p>
<p>最后验证:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<p>详细设置可以参考:
<a href="https://help.github.com/articles/generating-ssh-keys/" target="_blank" rel="external">GitHub Help - Generating SSH Keys</a></p>
<p><strong><em>遇到的报错处理</em></strong></p>
<ul>
<li>Could not open a connection to your authentication agent 错误, win7 下 使用</li>
</ul>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">eval $(ssh-agent)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>在ssh -vT <a href="mailto:git@github.com" target="_blank" rel="external">git@github.com</a> 报 port 22: Attempt to connect timed out without establishing a connection</p>
<p>需要 编写config文件在.ssh/目录下</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host github.com&#10;User git&#10;Hostname ssh.github.com&#10;PreferredAuthentications publickey&#10;IdentityFile ~/.ssh/id_rsa&#10;Port 443</span><br></pre></td></tr></table></figure>
<h2>2. Github Pages</h2>
<h3><strong>个人主页</strong></h3>
<p>也就是库的名称为yourname.github.io的主页，页面文件应当在master分支下，文件结构可以参考我的主页，也就是应当以HTML文件为主，是没有Markdown文件的。</p>
<p>主页源码可存储在新分支src下，与master独立</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init &#10;git branch  src &#10;git checkout src&#10;&#10; git add .&#10; git commit&#10; git remote add origin https://github.com/yourname/yourname.github.io.git&#10; git push origin src</span><br></pre></td></tr></table></figure>
<p>node_modules和其他用于hexo发布的文件可以不用上传，添加目录或文件到.gitignore中</p>
<h3><strong>项目主页</strong></h3>
<p>也就是库名不是yourname.github.io的主页，页面文件应当在gh-pages分支下，文件结构与个人主页基本一致，同样没有Markdown文件。</p>
<blockquote>
<p><em>只有yourname.github.io下master可以发布page</em><br><em>其他项目必须在 gh-pages分支下</em></p>
</blockquote>
<p>建立 gh-pages分支，会识别为网页路径
在_config.yml的deploy下 branch 为gh-pages即可</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deploy:&#10; type: git&#10; repo: https://github.com/username/repo.git&#10; branch: gh-pages</span><br></pre></td></tr></table></figure>
<p>master 分支存储hexo源文件</p>
<p>使用命令<code>git add .</code>，将所有文件提交到缓存区。
使用命令<code>git commit -m &quot;add all files&quot;</code> ，将这些文件提交到本地仓库。
使用命令<code>git push origin master</code>，将本地仓库的改动推送到github仓库。</p>
<p>在 <code>yourname.github.io/repo</code>下访问项目网页，需要配置_config.yml下的路径</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># URL&#10;## If your site is put in a subdirectory, set url as &#39;http://yoursite.com/child&#39; and root as &#39;/child/&#39;&#10;url: http://uuangian.github.io/repo&#10;root: /repo/</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://uuangian.github.io/2015/04/20/deploy-on-github/" data-id="cidz7acwv0012zoro7b9iw7pa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-build-site-record-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/17/build-site-record-hexo/" class="article-date">
  <time datetime="2015-04-17T01:56:52.000Z" itemprop="datePublished">2015-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/17/build-site-record-hexo/">Windows下建站记录 hexo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2>应用安装</h2>
<p><strong>安装 node.js</strong></p>
<ul>
<li>将其路径 \nodejs\ 加入环境变量，可以在命令框中使用其命令</li>
<li>安装npm
这个工具应该是个插件的管理工具，后面安装插件时会依赖它，所以要先把它安装好。
默认node.js会安装npm</li>
<li>安装Hexo</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli #-g &#26159;&#20840;&#23616;&#23433;&#35013;</span><br></pre></td></tr></table></figure>
<p><strong>安装 Git</strong>
Windows 下
msysgit
tortoisegit 可选</p>
<blockquote>
<p>之后执行hexo或git命令时都在Git Bash中操作</p>
</blockquote>
<h2>Hexo 建站</h2>
<p><strong>初始化</strong> <em><a href="http://hexo.io/docs/setup.html" target="_blank" rel="external">详见</a></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo init &#60;folder&#62;&#10;cd &#60;folder&#62;&#10;npm install</span><br></pre></td></tr></table></figure>
<p><strong>发文</strong> <em><a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">详见</a></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new &#60;title&#62;</span><br></pre></td></tr></table></figure>
<p><strong>生成</strong> <em><a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">详见</a></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<p>如果重新生成</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo clean &#10;hexo g</span><br></pre></td></tr></table></figure>
<p><strong>本地服务</strong> <em><a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">详见</a></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<h2>Hexo 设置相关</h2>
<p>Hexo的教程网上有许多，收集一些如下</p>
<ul>
<li><a href="http://yangjian.me/workspace/building-blog-with-hexo/" target="_blank" rel="external">使用hexo搭建博客</a></li>
<li><a href="http://lszb811.com/2014/07/08/Hexo-%E7%9A%84%E5%AD%A6%E4%B9%A0%E3%80%81%E6%90%AD%E5%BB%BA%E3%80%81%E6%95%B4%E7%90%86/" target="_blank" rel="external">Hexo-的学习、搭建、整理</a></li>
<li><a href="http://zipperary.com/2013/05/28/hexo-guide-1/" target="_blank" rel="external">hexo系列教程</a></li>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">hexo你的博客</a></li>
</ul>
<p><strong>1. Markdown</strong></p>
<ul>
<li>默认hexo-renderer-marked 并目前不支持角标功能，替换使用 <a href="https://github.com/celsomiranda/hexo-renderer-markdown-it" target="_blank" rel="external">hexo-renderer-markdown-it</a>
开启角标功能及其他参数设置在全局配置文件_config.yml中</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">markdown:&#10;  render:&#10;    html: true # &#21487;&#20197;&#20445;&#25345;html&#26684;&#24335;&#10;    xhtmlOut: false&#10;    breaks: false&#10;    linkify: true&#10;    typographer: true&#10;    quotes: &#39;&#8220;&#8221;&#8216;&#8217;&#39;&#10;  plugins:&#10;    - markdown-it-footnote&#10;    - markdown-it-sub&#10;    - markdown-it-sup</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank" rel="external">markdown 常用语法</a></li>
</ul>
<p><strong>2. FontAwesome</strong></p>
<ul>
<li>简洁的图标型字体库 <a href="http://fortawesome.github.io/Font-Awesome" target="_blank" rel="external"><i class="icon-html5"></i>Font-Awesome</a></li>
<li>配置在主题目录themes\xx\source\css\fonts\下
在css_variables.styl中可定义字体名称及路径</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// Fonts&#10;font-icon = FontAwesome&#10;font-icon-path = &#34;fonts/fontawesome-webfont&#34;&#10;font-icon-version = &#34;4.0.3&#34;</span><br></pre></td></tr></table></figure>
<p>在css\style.styl文件中定义字体加载，此文件定义了全局的css格式，在其中声明可以应用到整个网站</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@font-face&#10;  font-family: FontAwesome&#10;  font-style: normal&#10;  font-weight: normal&#10;  src: url(font-icon-path + &#34;.eot?v=#&#34; + font-icon-version)&#10;  src: url(font-icon-path + &#34;.eot?#iefix&#38;v=#&#34; + font-icon-version) format(&#34;embedded-opentype&#34;),&#10;       url(font-icon-path + &#34;.woff?v=#&#34; + font-icon-version) format(&#34;woff&#34;),&#10;       url(font-icon-path + &#34;.ttf?v=#&#34; + font-icon-version) format(&#34;truetype&#34;),&#10;       url(font-icon-path + &#34;.svg#fontawesomeregular?v=#&#34; + font-icon-version) format(&#34;svg&#34;)</span><br></pre></td></tr></table></figure>
<p>在\layout_partial\head.ejs中设置其css文件路径，可以使用在线地址或本地路径。
本地路径放置在\css\font-awesome.min.css下，路径设置如下。当需要使用最新或指定版本的css文件时，本地存放更为方便。</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &#60;head&#62;&#10;...&#10;...&#10;&#60;%- css(&#39;css/font-awesome.min&#39;) %&#62;&#10;...&#10;&#60;/head&#62;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://uuangian.github.io/2015/04/17/build-site-record-hexo/" data-id="cidz7acte0000zoro4xdxawn3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/05/28/32bit-dll-from-64bit-code/">[FW]Accessing 32-bit DLLs from 64-bit code</a>
          </li>
        
          <li>
            <a href="/2015/05/27/git-cmds/">Git 命令</a>
          </li>
        
          <li>
            <a href="/2015/05/21/wrapper-jni-guide-4/">Wrapper JNI Program Guide 4</a>
          </li>
        
          <li>
            <a href="/2015/05/20/markdown-using-tips/">Markdown 使用技巧</a>
          </li>
        
          <li>
            <a href="/2015/05/20/wrapper-jni-guide-3/">Wrapper JNI Program Guide 3</a>
          </li>
        
          <li>
            <a href="/2015/05/20/wrapper-jni-guide-2/">Wrapper JNI Program Guide 2</a>
          </li>
        
          <li>
            <a href="/2015/05/20/wrapper-jni-guide-1/">Wrapper JNI Program Guide 1</a>
          </li>
        
          <li>
            <a href="/2015/05/20/wrapper-jni-guide-0/">Wrapper JNI Program Guide</a>
          </li>
        
          <li>
            <a href="/2015/04/20/deploy-on-github/">GitHub上部署Hexo网站</a>
          </li>
        
          <li>
            <a href="/2015/04/17/build-site-record-hexo/">Windows下建站记录 hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/64bit/" style="font-size: 10px;">64bit</a> <a href="/tags/COM/" style="font-size: 10px;">COM</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/JNI/" style="font-size: 20px;">JNI</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/demo/" style="font-size: 10px;">demo</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/test/" style="font-size: 10px;">test</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 uuangian<br>      
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/book" class="mobile-nav-link">Book</a>
  
</nav>
    

<script src="http://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

<div id="scroll2top" style="position:fixed;bottom:150px;right:50px;cursor: pointer;Z-index:9999">
<a title="返回顶部" href="#"><img src="/scroll2top/scrollup.png"/></a>
</div>
<script src="/scroll2top/scroll2top.js"></script>



  </div>
</body>
</html>